<tr>
    <ng-container *ngFor="let column of columns">
      
      <!-- Checkbox column -->
      <td *ngIf="column.type == 'Index'" class="px-4 h-16">
        <div class="flex justify-center items-center">
          <input class="cursor-pointer" type="checkbox" [(ngModel)]="item.selected" (click)="toggleParentSelection(item)">
        </div>
      </td>
  
      <!-- Value column -->
      <td *ngIf="column.type == 'Value'" [ngClass]="{'bg-[#3F41D11F]': column.highlight}" class="px-4 h-16 items-center">
        
        <ng-container *ngIf="column.key === 'mobile_number_icon'; else main_value">
          <div class="text-start items-center gap-4">
            <i class="{{ item?.mobile_number_icon?.contact_number_icon }}"></i>
            {{ item?.mobile_number_icon?.mobile_number || '-' }}
          </div>
        </ng-container>
  
        <ng-template #main_value>
          <div [class]="column?.class" class="flex gap-2 items-center">
            
            <!-- Expand/Collapse Icon -->
            <img *ngIf="item.children" src="../../../assets/CaretUp.svg" alt="Caret Up" class="cursor-pointer rotate-180 transition-transform duration-200" [class.rotate-0]="item.expanded" (click)="toggleExpand(item)" />
            
            <!-- Status Button -->
            <ng-container *ngIf="item[column.key] === 'Approved' || item[column.key] === 'Pending' || item[column.key] === 'Rejected'; else normalText">
              <button class="px-[10px] py-1 rounded-full border text-sm font-medium"
                [ngClass]="{
                  'text-[#03A600] border-[#03A600]': item[column.key] === 'Approved',
                  'text-[#DF6E12] border-[#DF6E12]': item[column.key] === 'Pending',
                  'text-red-500 border-red-500': item[column.key] === 'Rejected'
                }">
                {{ item[column.key] }}
              </button>
            </ng-container>
  
            <!-- Normal Text -->
            <ng-template #normalText>
              <span [ngClass]="{
                'text-[#03A600]': item[column.key] === 'Active',
                'text-[#DF6E12]': item[column.key] === 'Inactive'
              }">
                {{ column.uppercase ? (item[column.key] | uppercase) : (item[column.key] || '-') }}
              </span>
            </ng-template>
  
          </div>
        </ng-template>
      </td>
  
      <!-- Action column -->
      <td *ngIf="column.type == 'Action'" class="px-4 h-16 flex justify-center items-center">
        <div class="flex gap-2 items-center justify-center">
          <ng-container *ngFor="let action of column.actions">
            <i *ngIf="action.condition || action.condition == undefined" (click)="action.action(item)" class="cursor-pointer {{ action.icon }} text-3xl" title="{{ action.title }}">
            </i>
          </ng-container>
        </div>
      </td>
  
    </ng-container>
  </tr>
  
  <!-- Expand Child Rows -->
  <tr *ngIf="item.expanded && item.children?.length > 0">
    <td colspan="999" class="pl-8">
      <table class="w-full">
        <tbody>
          <app-table-row *ngFor="let child of item.children" [item]="child" [columns]="columns"></app-table-row>
        </tbody>
      </table>
    </td>
  </tr>
  